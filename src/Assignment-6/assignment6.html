<!DOCTYPE html>
<html>
<head>
	<title>Sarafraj</title>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<link rel="stylesheet" href="./assignment6.css">
	<script src="bundle.js" type="text/javascript"></script>
</head>

<body>
	<div id="container" class="container">

	<!-- Start your code from here -->

	<div class="leftSide">
		<div class="counter">
			<div>Characters: <span id="characterCount">0</span></div>
			<div>Threads: <span id="threadCount">0</span></div>
		</div>

		<div class="inputArea">
			<textarea name="input" id="input" placeholder="Please! Type your text here"></textarea>
			<button id="btn" class="btn">Thread</button>
		</div>
	</div>

	<div class="rightSide">
		<p class="para">Your Threads will appear here &#128293;</p>
		<p class="para">&#9888; The character limit for each threads is 275</p>
		<div id="displayArea"></div>
			
		</div>
	</div>

	<!-- End your code -->

	</div>

	<script type="text/javascript">
	// write your javascript code here

	//This area for counting charecter and couting threads in text area
	document.getElementById("input").addEventListener("input", (e)=>{
		let characterCount = document.getElementById("characterCount");
		characterCount.innerHTML = input.value.length;

		let res;
		if ((input.value.length % 275) ===0){
			res = parseInt(input.value.length / 275);
		}
		else{
			res = parseInt(input.value.length / 275)+1;
		}
		document.getElementById("threadCount").innerHTML = res;

	});
	
	// Everything Below here are for populating the documet.
	let li = [];
	document.getElementById("btn").addEventListener("click", (e)=>{
		let input = document.getElementById("input");

		// Through aleart on no input
		if (!input.value.length){
			alert("Please! give some input");
			return;
		}

		let html = input.value[0], count = 1;

	// Deviding the string with 275 chrecter per Thread
		for(let i=1; i<input.value.length; i++){
			if (count<275){
				html += input.value[i];
				count++;
			}
			else{
				li.push([html, new Date()]);
				html = input.value[i];
				count = 1;
			}
		}
		li.push([html, new Date()]);

		populateDom(li);

		input.value = "";

		// After adding the Thred Charecter count become 0
		document.getElementById("characterCount").innerHTML = 0;

		// After adding the Thred Charecter count become 0
		document.getElementById("threadCount").innerHTML = 0;
		
	});

	// Populating the string to our Dom as Thread
	function populateDom(list){
		html = "";
		let displayArea = document.getElementById("displayArea");
		list.forEach((ele, idx)=>{
			html += `<div class="thread">
					<div class= "head">
    				<h4>Thread: ${idx+1}</h4>
					<h6>${ele[1]}</h6>
					</div>
    				<p class= "paragraph">${ele[0]}</p>
   	 				<button id="btnid${idx}" class="btn" onclick="deleting(this.id)">Delete</button>
					</div>`;
		});
		displayArea.innerHTML = html;

	}

	//Delete Fucntion 
	function deleting(divid){
		let idx = divid.replace("btnid", "");
		li.splice(idx, 1);
		populateDom(li);
	}


	</script>

</body>
<script>
/* DO NOT EDIT THIS CODE- WRITTERN TO PREVENT CSS CACHING */	  
	// Get HTML head element
	var head = document.getElementsByTagName('HEAD')[0]; 
	// Create new link Element
	var link = document.createElement('link');
	// set the attributes for link element 
	link.rel = 'stylesheet'; 
	link.type = 'text/css';
	link.href = './assignment6.css?v='+ new Date().getTime(); 
	// Append link element to HTML head
	head.appendChild(link); 
	/* DO NOT EDIT THIS CODE- WRITTERN TO PREVENT CSS CACHING */	  
</script> 
</html>
